{% load static %}
<!doctype html>
<html lang="en">
<!--begin::Head-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  {% block title %}
  {% endblock %}
  <!--begin::Accessibility Meta Tags-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#007bff" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)" />
  <!--end::Accessibility Meta Tags-->
  <!--begin::Primary Meta Tags-->
  <meta name="title" content="AdminLTE | Dashboard v2" />
  <meta name="author" content="ColorlibHQ" />
  <meta name="description"
    content="AdminLTE is a Free Bootstrap 5 Admin Dashboard, 30 example pages using Vanilla JS. Fully accessible with WCAG 2.1 AA compliance." />
  <meta name="keywords"
    content="bootstrap 5, bootstrap, bootstrap 5 admin dashboard, bootstrap 5 dashboard, bootstrap 5 charts, bootstrap 5 calendar, bootstrap 5 datepicker, bootstrap 5 tables, bootstrap 5 datatable, vanilla js datatable, colorlibhq, colorlibhq dashboard, colorlibhq admin dashboard, accessible admin panel, WCAG compliant" />
  <!--end::Primary Meta Tags-->
  <!--begin::Accessibility Features-->
  <!-- Skip links will be dynamically added by accessibility.js -->
  <meta name="supported-color-schemes" content="light dark" />
  <link rel="preload" href="{% static 'css/admin/adminlte.css' %}" as="style" />
  <!--end::Accessibility Features-->
  <!--begin::Fonts-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css"
    integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q=" crossorigin="anonymous" media="print"
    onload="this.media='all'" />
  <!--end::Fonts-->
  <!--begin::Third Party Plugin(OverlayScrollbars)-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/styles/overlayscrollbars.min.css"
    crossorigin="anonymous" />
  <!--end::Third Party Plugin(OverlayScrollbars)-->
  <!--begin::Third Party Plugin(Bootstrap Icons)-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    crossorigin="anonymous" />
  <!--end::Third Party Plugin(Bootstrap Icons)-->
  <!--begin::Required Plugin(AdminLTE)-->
  <link rel="stylesheet" href="{% static 'css/admin/adminlte.css' %}" />
  <!--end::Required Plugin(AdminLTE)-->
  <!-- apexcharts -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css"
    integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0=" crossorigin="anonymous" />
  {% block css %}
  {% endblock %}
</head>

<body class="layout-fixed sidebar-expand-lg sidebar-open bg-body-tertiary">
  <!--begin::App Wrapper-->
  <div class="app-wrapper">
    <!--begin::Header-->
    <nav class="app-header navbar navbar-expand bg-body">
      <!--begin::Container-->
      <div class="container-fluid">
        <!--begin::Start Navbar Links-->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button">
              <i class="bi bi-list"></i>
            </a>
          </li>
          <li class="nav-item d-none d-md-block"><a href="{% url 'landing-page' %}" class="nav-link">Front-Page</a></li>
          <!-- <li class="nav-item d-none d-md-block"><a href="#" class="nav-link">Contact</a></li> -->
        </ul>
        <!--end::Start Navbar Links-->
        <!--begin::End Navbar Links-->
        <ul class="navbar-nav ms-auto">
          <!--begin::Navbar Search-->
          <!-- <li class="nav-item">
            <a class="nav-link" data-widget="navbar-search" href="#" role="button">
              <i class="bi bi-search"></i>
            </a>
          </li> -->
          <!--end::Navbar Search-->
          <!-- begin::Messages Dropdown Menu-->
          <!-- <li class="nav-item dropdown">
            <a class="nav-link" data-bs-toggle="dropdown" href="#">
              <i class="bi bi-chat-text"></i>
              <span class="navbar-badge badge text-bg-danger">3</span>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
              <a href="#" class="dropdown-item"> -->
                <!--begin::Message-->
                <!-- <div class="d-flex">
                  <div class="flex-shrink-0">
                    <img src="./assets/img/user1-128x128.jpg" alt="User Avatar"
                      class="img-size-50 rounded-circle me-3" />
                  </div>
                  <div class="flex-grow-1">
                    <h3 class="dropdown-item-title">
                      Brad Diesel
                      <span class="float-end fs-7 text-danger"><i class="bi bi-star-fill"></i></span>
                    </h3>
                    <p class="fs-7">Call me whenever you can...</p>
                    <p class="fs-7 text-secondary">
                      <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                    </p>
                  </div>
                </div> -->
                <!--end::Message-->
              <!-- </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item"> -->
                <!--begin::Message-->
                <!-- <div class="d-flex">
                  <div class="flex-shrink-0">
                    <img src="./assets/img/user8-128x128.jpg" alt="User Avatar"
                      class="img-size-50 rounded-circle me-3" />
                  </div>
                  <div class="flex-grow-1">
                    <h3 class="dropdown-item-title">
                      John Pierce
                      <span class="float-end fs-7 text-secondary">
                        <i class="bi bi-star-fill"></i>
                      </span>
                    </h3>
                    <p class="fs-7">I got your message bro</p>
                    <p class="fs-7 text-secondary">
                      <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                    </p>
                  </div>
                </div> -->
                <!--end::Message-->
              <!-- </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item"> -->
                <!--begin::Message-->
                <!-- <div class="d-flex">
                  <div class="flex-shrink-0">
                    <img src="./assets/img/user3-128x128.jpg" alt="User Avatar"
                      class="img-size-50 rounded-circle me-3" />
                  </div>
                  <div class="flex-grow-1">
                    <h3 class="dropdown-item-title">
                      Nora Silvester
                      <span class="float-end fs-7 text-warning">
                        <i class="bi bi-star-fill"></i>
                      </span>
                    </h3>
                    <p class="fs-7">The subject goes here</p>
                    <p class="fs-7 text-secondary">
                      <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                    </p>
                  </div>
                </div> -->
                <!--end::Message-->
              <!-- </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
            </div>
          </li> -->
          <!-- end::Messages Dropdown Menu -->
          <!--begin::Notifications Dropdown Menu-->
          <li class="nav-item dropdown">
            <a class="nav-link" data-bs-toggle="dropdown" href="#" onclick="updateNotifStatus()">
              <i class="bi bi-bell-fill"></i>
              <span id="id-notif-count-outer" class="navbar-badge badge text-bg-warning {% if notifications|length == 0 %}d-none{% endif %}">{{ notifications|length }}</span>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end px-2">
              <span id="id-notif-count-inner" class="dropdown-item dropdown-header">{{ notifications|length }} Notifications</span>
              <div class="dropdown-divider"></div>
              <div id="id-notif-div">
              {% if notifications|length == 0 %}
                <input id="id-notif-id" type="hidden">
              {% endif %}
              {% for notification in notifications %}
                {% if forloop.first %}
                  <input id="id-notif-id" type="hidden" value="{{ notification.id }}">
                {% endif %}
                {% if notification.notif_area == 'Q' %}
                  {% if request.user.is_admin == True %}
                    <a class="text-muted text-decoration-none" href="{% url 'view-quotation' quoteRefNum=notification.quotation.quote_ref_num  %}">
                  {% elif request.user.is_enduser == True %}
                    <a class="text-muted text-decoration-none" href="{% url 'view-client-quotation' quoteEmailCode=notification.quotation.email_code  %}">
                  {% endif %}
                    <div>
                      <i class="bi bi-file-earmark-fill me-2"></i> 
                      <span style="overflow-x: scroll;">{{ notification.text }}</span>
                    </div>
                    <!-- <span class="float-end text-secondary fs-7">{{ notification.created_at }}</span> -->
                  </a>
                  <div class="dropdown-divider"></div>
                {% elif notification.notif_area == 'F' %}
                  <a class="text-muted text-decoration-none" href="{% url 'fault-report-details' jobNumber=notification.fault_report.job_number  %}">
                    <div>
                      <i class="bi bi-file-earmark-fill me-2"></i> 
                      <span style="overflow-x: scroll;">{{ notification.text }}</span>
                    </div>
                  </a>
                  <div class="dropdown-divider"></div>
                {% elif notification.notif_area == 'A' %}
                  <a class="text-muted text-decoration-none" href="{% url 'fault-report-details' jobNumber=notification.fault_report.job_number  %}">
                    <div>
                      <i class="bi bi-file-earmark-fill me-2"></i> 
                      <span style="overflow-x: scroll;">{{ notification.text }}</span>
                    </div>
                    <!-- <span class="float-end text-secondary fs-7">{{ notification.created_at }}</span> -->
                  </a>
                  <div class="dropdown-divider"></div>
                {% endif %}
              {% endfor %}
                </div>
              <!-- <a href="#" class="dropdown-item dropdown-footer"> See All Notifications </a> -->
            </div>
          </li>
          <!--end::Notifications Dropdown Menu-->
          <!--begin::Fullscreen Toggle-->
          <li class="nav-item">
            <a class="nav-link" href="#" data-lte-toggle="fullscreen">
              <i data-lte-icon="maximize" class="bi bi-arrows-fullscreen"></i>
              <i data-lte-icon="minimize" class="bi bi-fullscreen-exit" style="display: none"></i>
            </a>
          </li>
          <!--end::Fullscreen Toggle-->
          {% if request.user.is_authenticated %}
          <!--begin::User Menu Dropdown-->
          <li class="nav-item dropdown user-menu">
            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
              <span class="">
                <i class="bi bi-person-fill" style="font-size: 1.2rem;"></i>
              </span>
            </a>
            <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
              <!--begin::User Image-->
              <li class="user-header text-bg-primary">
                <p>
                  {{ request.user.first_name }} {{ request.user.last_name }}
                  <small>Registered at {{ request.user.created_at }}</small>
                </p>
              </li>
              <!--end::User Image-->
              <!--begin::Menu Footer-->
              <li class="user-footer">
                <!-- <a href="#" class="btn btn-default btn-flat">Profile</a> -->
                <a href="{% url 'logout-admin' %}" class="btn btn-default btn-flat float-end">Sign out</a>
              </li>
              <!--end::Menu Footer-->
            </ul>
          </li>
          <!--end::User Menu Dropdown-->
          {% endif %}
        </ul>
        <!--end::End Navbar Links-->
      </div>
      <!--end::Container-->
    </nav>
    <!--end::Header-->
    <!--begin::Sidebar-->
    <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark">
      <!--begin::Sidebar Brand-->
      <div class="sidebar-brand">
        <!--begin::Brand Link-->
        <a href="{% url 'landing-page' %}" class="brand-link">
          <!--begin::Brand Image-->
          <img src="{% static '/assets/admin/fhs-logo.png' %}" alt="FHS Logo" class="brand-image opacity-75 shadow" />
          <!--end::Brand Image-->
          <!--begin::Brand Text-->
          <span class="brand-text fw-light">FHS</span>
          <!--end::Brand Text-->
        </a>
        <!--end::Brand Link-->
      </div>
      <!--end::Sidebar Brand-->
      <!--begin::Sidebar Wrapper-->
      <div class="sidebar-wrapper">
        <nav class="mt-2">
          <!--begin::Sidebar Menu-->
          <ul class="nav sidebar-menu flex-column" data-lte-toggle="treeview" role="navigation"
            aria-label="Main navigation" data-accordion="false" id="navigation">
            {% if request.user.is_admin == True %}
            <li class="nav-item">
              <a href="{% url 'home' %}" class="nav-link">
                <i class="nav-icon bi bi-speedometer"></i>
                <p>
                  Admin Dashboard
                </p>
              </a>
            </li>
            {% elif request.user.is_technician == True %}
            <li class="nav-item">
              <a href="{% url 'home' %}" class="nav-link">
                <i class="nav-icon bi bi-speedometer"></i>
                <p>
                  Dashboard
                </p>
              </a>
            </li>
            {% elif request.user.is_enduser == True %}
            <li class="nav-item">
              <a href="{% url 'home' %}" class="nav-link">
                <i class="nav-icon bi bi-speedometer"></i>
                <p>
                  Dashboard
                </p>
              </a>
            </li>
            <li class="nav-item">
              <a href="{% url 'create-customer-review' %}" class="nav-link">
                <i class="nav-icon bi bi-star"></i>
                <p>
                  Leave A Review 
                </p>
              </a>
            </li>
            {% endif %}
            <li class="nav-item {% if sub_menu == 'Fault-Reports' %}menu-open{% endif %}">
              <a href="#" class="nav-link">
                <i class="nav-icon bi bi-file-earmark"></i>
                <p>
                  Fault Reports
                  <i class="nav-arrow bi bi-chevron-right"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                {% if request.user.is_admin and perms.fault_report.add_faultreport == True or request.user.is_enduser %}
                  <li class="nav-item">
                    <a href="{% url 'create-fault-report' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle"></i>
                      <p>Create A Report</p>
                    </a>
                  </li>
                {% endif %}
                {% if request.user.is_admin and perms.fault_report.view_faultreport == True or request.user.is_technician == True or request.user.is_enduser == True %}
                  <li class="nav-item">
                    <a href="{% url 'fault-reports' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle{% if page_ == 'Fault Reports' %}-fill{% endif %}"></i>
                      <p>Fault Reports</p>
                    </a>
                  </li>
                {% endif %}
              </ul>
            </li>
            {% if request.user.is_admin == True %}
            <li class="nav-item {% if sub_menu == 'Admins' %}menu-open{% endif %}">
              <a href="#" class="nav-link">
                <i class="nav-icon bi bi-person"></i>
                <p>
                  Admins
                  <i class="nav-arrow bi bi-chevron-right"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                {% if perms.account.add_user == True %}
                  <li class="nav-item">
                    <a href="{% url 'create-admin-internal' type='internal' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle{% if page_ == 'Create Admin' %}-fill{% endif %}"></i>
                      <p>Create New Admin</p>
                    </a>
                  </li>
                {% endif %}
                {% if perms.account.view_user == True %}
                  <li class="nav-item">
                    <a href="{% url 'admin-list' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle{% if page_ == 'Admin List' %}-fill{% endif %}"></i>
                      <p>Admin List</p>
                    </a>
                  </li>
                {% endif %}
              </ul>
            </li>
            <li class="nav-item {% if sub_menu == 'Technicians' %}menu-open{% endif %}">
              <a href="#" class="nav-link">
                <i class="nav-icon bi bi-wrench"></i>
                <p>
                  Technicians
                  <i class="nav-arrow bi bi-chevron-right"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                {% if perms.account.add_user %}
                  <li class="nav-item">
                    <a href="{% url 'create-technician' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle{% if page_ == 'Create Technician' %}-fill{% endif %}"></i>
                      <p>Create New Technician</p>
                    </a>
                  </li>
                {% endif %}
                {% if perms.account.view_user %}
                  <li class="nav-item">
                    <a href="{% url 'technician-list' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle{% if page_ == 'Technician List' %}-fill{% endif %}"></i>
                      <p>Technician List</p>
                    </a>
                  </li>
                {% endif %}
              </ul>
            </li>
            <li class="nav-item {% if sub_menu == 'Customers' %}menu-open{% endif %}">
              <a href="#" class="nav-link">
                <i class="nav-icon bi bi-people"></i>
                <p>
                  Customers
                  <i class="nav-arrow bi bi-chevron-right"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                {% if perms.account.view_user %}
                  <li class="nav-item">
                    <a href="{% url 'customer-list' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle{% if page_ == 'Customer List' %}-fill{% endif %}"></i>
                      <p>Customer List</p>
                    </a>
                  </li>
                {% endif %}
              </ul>
            </li>
            <li class="nav-item {% if sub_menu == 'Job' %}menu-open{% endif %}">
              <a href="#" class="nav-link">
                <i class="nav-icon bi bi-briefcase"></i>
                <p>
                  Jobs
                  <i class="nav-arrow bi bi-chevron-right"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                {% if perms.job.add_job %}
                  <li class="nav-item">
                    <a href="{% url 'create-job' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle{% if page_ == 'Create Job' %}-fill{% endif %}"></i>
                      <p>Create New Job</p>
                    </a>
                  </li>
                {% endif %}
                {% if perms.job.view_job %}
                  <li class="nav-item">
                    <a href="{% url 'job-list' %}" class="nav-link">
                      <i class="nav-icon bi bi-circle{% if page_ == 'Job List' %}-fill{% endif %}"></i>
                      <p>Job List</p>
                    </a>
                  </li>
                {% endif %}
              </ul>
            </li>
            <li class="nav-item {% if sub_menu == 'Address' %}menu-open{% endif %}">
                <a href="#" class="nav-link">
                  <i class="nav-icon bi bi-map"></i>
                  <p>
                    Address
                    <i class="nav-arrow bi bi-chevron-right"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item {% if sub_menu2 == 'Location' %}menu-open{% endif %}">
                    <a href="#" class="nav-link">
                      <i class="nav-icon bi bi-pin-map"></i>
                      <p>
                        Locations
                        <i class="nav-arrow bi bi-chevron-right"></i>
                      </p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a href="{% url 'create-location' %}" class="nav-link">
                          <i class="nav-icon bi bi-record-circle{% if page_ == 'Create Location' %}-fill{% endif %}"></i>
                          <p>Create Location</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="{% url 'location-list' %}" class="nav-link">
                          <i class="nav-icon bi bi-record-circle{% if page_ == 'Location List' %}-fill{% endif %}"></i>
                          <p>Location List</p>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="nav-item {% if sub_menu2 == 'Organization' %}menu-open{% endif %}">
                    <a href="#" class="nav-link">
                      <i class="nav-icon bi bi-building"></i>
                      <p>
                        Organization
                        <i class="nav-arrow bi bi-chevron-right"></i>
                      </p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a href="{% url 'create-organization' %}" class="nav-link">
                          <i class="nav-icon bi bi-record-circle{% if page_ == 'Create Organization' %}-fill{% endif %}"></i>
                          <p>Create Organization</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="{% url 'organization-list' %}" class="nav-link">
                          <i class="nav-icon bi bi-record-circle{% if page_ == 'Organization List' %}-fill{% endif %}"></i>
                          <p>Organization List</p>
                        </a>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
            <li class="nav-item {% if sub_menu == 'Setting' %}menu-open{% endif %}">
              <a href="#" class="nav-link">
                <i class="nav-icon bi bi-gear"></i>
                <p>
                  Settings
                  <i class="nav-arrow bi bi-chevron-right"></i>
                </p>
              </a>
              <ul class="nav nav-treeview">
                  {% if perms.front_page.change_frontpage %}
                    <li class="nav-item">
                      <a href="{% url 'update-front-page' %}" class="nav-link">
                        <i class="nav-icon bi bi-circle{% if page_ == 'Update Front Page' %}-fill{% endif %}"></i>
                        <p>Update Front Page</p>
                      </a>
                    </li>
                  {% endif %}
                  {% if perms.front_page.add_team %}
                    <li class="nav-item">
                      <a href="{% url 'add-team-member' %}" class="nav-link">
                        <i class="nav-icon bi bi-circle{% if page_ == 'Add team member' %}-fill{% endif %}"></i>
                        <p>Add Team Member</p>
                      </a>
                    </li>
                  {% endif %}
                  {% if perms.front_page.view_team %}
                    <li class="nav-item">
                      <a href="{% url 'team-members' %}" class="nav-link">
                        <i class="nav-icon bi bi-circle{% if page_ == 'Team Members' %}-fill{% endif %}"></i>
                        <p>Team</p>
                      </a>
                    </li>
                  {% endif %}
                  {% if perms.front_page.view_customerreview %}
                    <li class="nav-item">
                      <a href="{% url 'customer-reviews' %}" class="nav-link">
                        <i class="nav-icon bi bi-circle{% if page_ == 'Customer Reviews' %}-fill{% endif %}"></i>
                        <p>Customer Reviews</p>
                      </a>
                    </li>
                  {% endif %}
              </ul>
            </li>
            {% endif %}
          </ul>
          <!--end::Sidebar Menu-->
        </nav>
      </div>
      <!--end::Sidebar Wrapper-->
    </aside>
    <!--end::Sidebar-->
    {% block content %}
    {% endblock %}
    <!--begin::Footer-->
    <footer class="app-footer">
      <!--begin::To the end-->
      <div class="float-end d-none d-sm-inline">Anything you want</div>
      <!--end::To the end-->
      <!--begin::Copyright-->
      <strong>
        Copyright &copy; 2026&nbsp;
        <a href="{% url 'landing-page' %}" class="text-decoration-none">FHS Facilities</a>.
      </strong>
      All rights reserved.
      <!--end::Copyright-->
    </footer>
    <!--end::Footer-->
  </div>
  <!--end::App Wrapper-->
  <!--begin::Script-->
  <!--begin::Third Party Plugin(OverlayScrollbars)-->
  {% if page_ != 'Fault Reports' %}
    <script src="{% static 'js/admin/jquery.min.js' %}"></script>
  {% endif %}
  {% block scripts %}
  {% endblock %}
  <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/browser/overlayscrollbars.browser.es6.min.js"
    crossorigin="anonymous"></script>
  <!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Required Plugin(popperjs for Bootstrap 5)-->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    crossorigin="anonymous"></script>
  <!--end::Required Plugin(popperjs for Bootstrap 5)--><!--begin::Required Plugin(Bootstrap 5)-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
  <!--end::Required Plugin(Bootstrap 5)--><!--begin::Required Plugin(AdminLTE)-->
  <script src="{% static 'js/admin/adminlte.js' %}"></script>
  
  <!--end::Required Plugin(AdminLTE)--><!--begin::OverlayScrollbars Configure-->
  <script>
    function hideButton(btnId, divId){
      document.getElementById(btnId).classList.add('d-none');
      const textSpan = document.createElement('span');
      textSpan.textContent = 'Processing';
      document.getElementById(divId).appendChild(textSpan);
    }
    function deleteRecord(deleteText, deleteURL){
      deleteTextSpan = document.getElementById('id-delete-text');
      deleteTextSpan.innerHTML = deleteText;
      console.log(deleteURL);
      deleteButton = document.getElementById('id-delete-btn');
      deleteButton.href=deleteURL;
    }
  </script>
  <script>
    const SELECTOR_SIDEBAR_WRAPPER = '.sidebar-wrapper';
    const Default = {
      scrollbarTheme: 'os-theme-light',
      scrollbarAutoHide: 'leave',
      scrollbarClickScroll: true,
    };
    document.addEventListener('DOMContentLoaded', function () {
      const sidebarWrapper = document.querySelector(SELECTOR_SIDEBAR_WRAPPER);
      if (sidebarWrapper && OverlayScrollbarsGlobal?.OverlayScrollbars !== undefined) {
        OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, {
          scrollbars: {
            theme: Default.scrollbarTheme,
            autoHide: Default.scrollbarAutoHide,
            clickScroll: Default.scrollbarClickScroll,
          },
        });
      }
    });
  </script>
  <!--end::OverlayScrollbars Configure-->
  <!-- OPTIONAL SCRIPTS -->
  <!-- apexcharts -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js"
    integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8=" crossorigin="anonymous"></script> -->
  <script>
    var totalNotifs = '{{ notifications|length }}';
    totalNotifs = parseInt(totalNotifs);
    console.log(typeof(totalNotifs));
    console.log(totalNotifs);
    const ws = new WebSocket(`ws://${window.location.host}/ws/notification/`);
    ws.onmessage = (e) => {
      console.log(e);
      const strMsg = JSON.parse(e.data);
      console.log(strMsg.text);
      totalNotifs += 1;
      const notifCountSpanOuter = document.getElementById('id-notif-count-outer');
      notifCountSpanOuter.classList.remove('d-none');
      notifCountSpanOuter.textContent = totalNotifs;

      const notifCountSpanInner = document.getElementById('id-notif-count-inner');
      notifCountSpanInner.textContent = totalNotifs+" Notifications";

      document.getElementById('id-notif-id').value = strMsg.id;

      const notifDiv = document.getElementById('id-notif-div');
      if(strMsg.notif_area == 'F' || strMsg.notif_area == 'A'){
        let link = "{% url 'fault-report-details' jobNumber=0  %}";
        var finalLink = link.replace('0', strMsg.fault_id);
      }
      else if(strMsg.notif_area == 'Q'){
        if(strMsg.is_admin == 1){
          let link = "{% url 'view-quotation' quoteRefNum=0  %}";
          var finalLink = link.replace('0', strMsg.quote_ref_num);
        }
        else{
          let link = "{% url 'view-client-quotation' quoteEmailCode=0  %}";
          var finalLink = link.replace('0', strMsg.email_code);
        }
      }
      innerHtml = `<a class="text-muted text-decoration-none" href="${finalLink}">
                    <div>
                      <i class="bi bi-file-earmark-fill me-2"></i> 
                      <span style="overflow-x: scroll;">${strMsg.text}</span>
                    </div>
                  </a>
                  <div class="dropdown-divider"></div>`;
      notifDiv.insertAdjacentHTML('afterbegin', innerHtml);
    }

    async function updateNotifStatus(){
      const notifId = document.getElementById('id-notif-id').value;
      alert(notifId);
      const url = `{% url 'update-notif-status' %}?notif-id=${notifId}`;
      
      try{
        response = await fetch(url);

        if(!response.ok){
          throw new Error('Error Status: '+error.message);
        }

        data = await response.json();
        console.log(data);
        document.getElementById('id-notif-count-outer').classList.add('d-none');
      }
      catch(error){
        console.error(error.message);
      }
    }
  </script>
  <!-- <script>
    // NOTICE!! DO NOT USE ANY OF THIS JAVASCRIPT
    // IT'S ALL JUST JUNK FOR DEMO
    // ++++++++++++++++++++++++++++++++++++++++++

    /* apexcharts
     * -------
     * Here we will create a few charts using apexcharts
     */

    //-----------------------
    // - MONTHLY SALES CHART -
    //-----------------------

    const sales_chart_options = {
      series: [
        {
          name: 'Digital Goods',
          data: [28, 48, 40, 19, 86, 27, 90],
        },
        {
          name: 'Electronics',
          data: [65, 59, 80, 81, 56, 55, 40],
        },
      ],
      chart: {
        height: 180,
        type: 'area',
        toolbar: {
          show: false,
        },
      },
      legend: {
        show: false,
      },
      colors: ['#0d6efd', '#20c997'],
      dataLabels: {
        enabled: false,
      },
      stroke: {
        curve: 'smooth',
      },
      xaxis: {
        type: 'datetime',
        categories: [
          '2023-01-01',
          '2023-02-01',
          '2023-03-01',
          '2023-04-01',
          '2023-05-01',
          '2023-06-01',
          '2023-07-01',
        ],
      },
      tooltip: {
        x: {
          format: 'MMMM yyyy',
        },
      },
    };

    const sales_chart = new ApexCharts(
      document.querySelector('#sales-chart'),
      sales_chart_options,
    );
    sales_chart.render();

    //---------------------------
    // - END MONTHLY SALES CHART -
    //---------------------------

    function createSparklineChart(selector, data) {
      const options = {
        series: [{ data }],
        chart: {
          type: 'line',
          width: 150,
          height: 30,
          sparkline: {
            enabled: true,
          },
        },
        colors: ['var(--bs-primary)'],
        stroke: {
          width: 2,
        },
        tooltip: {
          fixed: {
            enabled: false,
          },
          x: {
            show: false,
          },
          y: {
            title: {
              formatter() {
                return '';
              },
            },
          },
          marker: {
            show: false,
          },
        },
      };

      const chart = new ApexCharts(document.querySelector(selector), options);
      chart.render();
    }

    const table_sparkline_1_data = [25, 66, 41, 89, 63, 25, 44, 12, 36, 9, 54];
    const table_sparkline_2_data = [12, 56, 21, 39, 73, 45, 64, 52, 36, 59, 44];
    const table_sparkline_3_data = [15, 46, 21, 59, 33, 15, 34, 42, 56, 19, 64];
    const table_sparkline_4_data = [30, 56, 31, 69, 43, 35, 24, 32, 46, 29, 64];
    const table_sparkline_5_data = [20, 76, 51, 79, 53, 35, 54, 22, 36, 49, 64];
    const table_sparkline_6_data = [5, 36, 11, 69, 23, 15, 14, 42, 26, 19, 44];
    const table_sparkline_7_data = [12, 56, 21, 39, 73, 45, 64, 52, 36, 59, 74];

    createSparklineChart('#table-sparkline-1', table_sparkline_1_data);
    createSparklineChart('#table-sparkline-2', table_sparkline_2_data);
    createSparklineChart('#table-sparkline-3', table_sparkline_3_data);
    createSparklineChart('#table-sparkline-4', table_sparkline_4_data);
    createSparklineChart('#table-sparkline-5', table_sparkline_5_data);
    createSparklineChart('#table-sparkline-6', table_sparkline_6_data);
    createSparklineChart('#table-sparkline-7', table_sparkline_7_data);

    //-------------
    // - PIE CHART -
    //-------------

    const pie_chart_options = {
      series: [700, 500, 400, 600, 300, 100],
      chart: {
        type: 'donut',
      },
      labels: ['Chrome', 'Edge', 'FireFox', 'Safari', 'Opera', 'IE'],
      dataLabels: {
        enabled: false,
      },
      colors: ['#0d6efd', '#20c997', '#ffc107', '#d63384', '#6f42c1', '#adb5bd'],
    };

    const pie_chart = new ApexCharts(document.querySelector('#pie-chart'), pie_chart_options);
    pie_chart.render();

    //-----------------
    // - END PIE CHART -
    //-----------------
  </script>
  end::Script -->
</body>
<!--end::Body-->

</html>